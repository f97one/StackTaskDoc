.. _app_config_acitivity:

==============
アプリ設定画面
==============

物理名、宣言
============

``class AppConfigActivity : AbstractAppActivity()``

画面部品
========

.. list-table::
   :header-rows: 1

   * - 論理名
     - 種別
     - I/O
     - 最大桁数
     - 入力規則
     - 初期値
     - 導入元
     - 備考
   * - タスク表示順
     - Spinner
     - I/O
     - -
     - -
     - 1:期日順
     - ``SharedPreference`` の ``TaskOrder``
     - 1:期日順 、 2:優先度順 、 3:名前順
   * - 説明文
     - TextView
     - O
     - -
     - -
     - -
     - -
     - -
   * - タスク確認フラグ
     - Switch
     - I/O
     - -
     - -
     - true
     - ``SharedPreference`` の ``ConfirmWhenFinish``
     - -

イベント処理
============

初期化
------

#. | レイアウトXMLを展開後、Viewをinjectする。
   | ※ ``androidx`` で行う。
#. ``SharedPreference`` から読みだした値を画面部品に反映する。
#. :ref:`on_task_order_changed` を実行する。

.. _on_task_order_changed:

タスク表示順変更時
------------------

#. 画面部品.タスク表示順の値を取得する。
#. 取得した値に応じ、画面部品.説明文の表示を変更する。

   +---------------------------+-----------------------------------------+
   | 画面部品.タスク表示順の値 | 画面部品.説明文の表示                   |
   +===========================+=========================================+
   | 1:期日順                  | Ordered by Due Date -> Priority -> Name |
   +---------------------------+-----------------------------------------+
   | 2:優先度順                | Ordered by Priority -> Due Date -> Name |
   +---------------------------+-----------------------------------------+
   | 3:名前順                  | Ordered by Name -> Due Date -> Priority |
   +---------------------------+-----------------------------------------+

休止時
------

#. 画面部品.タスク表示順と画面部品.タスク確認フラグの設定値を取得する。
#. 取得した値を ``SharedPreference`` へ反映する。
